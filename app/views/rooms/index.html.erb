<%= turbo_frame_tag "appearance_channel" %>
<div id="appearance_channel"></div>

<div id="chatroom_container" class="row bg-dark text-light">
  <div id="side_panel" class="col-md-4 col-sm-4">
        <%= render current_user %>

        <h3 style="margin: 5px; color: white"> Users </h3>
        <div>
            <%= turbo_stream_from "users" %>
            <div id="users">
                <%= render @users %>
            </div>
        </div>

        <h3 style="margin: 5px; color: white"> Rooms </h3>
        <div>
            <%= turbo_stream_from "rooms" %>
            <div id="rooms">
                <%= render @rooms %>
            </div>
            <%= render "layouts/new_room_form" %> 
        </div>
    </div>

    <div class="col-md-8 col-sm-8 bg-dark text-light" id="room_container">
        <% if @single_room %>
            <h3 class="text-center", style="color: white; margin-top: 5px;"> <%= @user&.name || @single_room.name %> </h3>    
        <% end %>

        <div id="single_room">
            <% if @single_room %>                
                <%= turbo_stream_from @single_room %>
                <div id="messages" data-controller="scroll">
                    <% turbo_frame_tag "page_handler" %>
                    <%= render "messages/pager", pagy: @pagy %>                 <%# a button to trigger "load more mess action" => update @messages %>
                    <div id="messages-container"><%= render @messages %></div>  <%# prepend messages for next page to the top of the div %>
                </div>
            <% end %>
        </div>
        <% if @single_room %> 
            <%= render "layouts/new_message_form" %>         
        <% end %>
    </div>
</div>